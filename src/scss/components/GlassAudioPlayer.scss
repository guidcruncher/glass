// 1. SASS Module Imports
@use 'sass:map';
@use 'sass:color';
@use '../config' as *;
@use '../mixins' as *;

:root {
  // Default theme is light
  @include apply-theme(light);

  // Apply core semantic variables
  background-color: var(--system-background);
  color: var(--label);
}

// Override for the dark theme
.dark-mode {
  @include apply-theme(dark);
}

// 6. Refactored Component-Specific Styles using new variables

.audio-player-container {
  box-sizing: border-box;
  width: 100%;
  max-width: 450px;
  margin: 2rem auto;
  padding: 1rem;
}

.audio-player-wrapper {
  // Uses glassmorphism properties
  background: var(--bg-surface);
  backdrop-filter: blur(16px);
  -webkit-backdrop-filter: blur(16px);
  border-radius: 18px;
  border: 1px solid var(--ui-border-color);
  box-shadow: var(--shadow-depth);
  padding: 1.5rem;
  color: var(--label);
  display: flex;
  flex-direction: column;
  gap: 1rem;
}

// Text colors
.track-title {
  color: var(--label);
}
.track-artist,
.time-display {
  color: var(--secondary-label);
}

// Icon and accent colors
.track-icon {
  width: 48px;
  height: 48px;
  // Using the system-blue color for dynamic gradient
  background: linear-gradient(
    135deg,
    var(--system-blue),
    color.darken(var(--system-blue), 15%) // SASS function ensures color is darker
  );
  border-radius: 12px;
  box-shadow: var(--shadow-depth);
}
.track-icon svg {
  color: var(--ui-selected-text-color);
} // White text on accent

// Progress Bar
.progress-bar-track {
  background-color: var(--separator);
  border: 1px solid var(--ui-border-color);
  box-shadow: var(--shadow-inset);
}

.progress-bar-fill {
  // Uses the complex gradient property from the theme map
  background: var(--progress-bar-fill-gradient);
}

.progress-handle {
  background-color: var(--slider-handle-color);
  // Border is opposite of the main text color (text for light, dark for dark)
  border: 2px solid var(--system-background);
}

// Buttons
.glass-button {
  background-color: var(--bg-surface);
  border: 1px solid var(--ui-border-color);
  box-shadow: var(--shadow-depth);
  color: var(--label);
}

.glass-button:hover {
  background-color: var(--bg-hover);
}

.glass-button:active {
  // Uses the primary accent color for active state feedback
  background-color: var(--ui-selected-bg);
  color: var(--ui-selected-text-color);
  box-shadow: var(--shadow-inset);
}

// Slider
.glass-slider {
  background: var(--slider-track-bg);
}
.glass-slider::-webkit-slider-thumb {
  background: var(--slider-handle-color);
  // Border is text color for contrast
  border: 2px solid var(--label);
  box-shadow: var(--shadow-depth);
}
